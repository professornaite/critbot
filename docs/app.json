[{"name":"app.R","content":"# critbot-shiny/app.R\nlibrary(shiny)\nlibrary(dplyr)\nlibrary(here)\n\nui <- fluidPage(\n  titlePanel(\"CritBot Word Query\"),\n  sidebarLayout(\n    sidebarPanel(\n      textInput(\"word\", \"Enter a word to query:\"),\n      actionButton(\"submit\", \"Submit\"),\n      tags$hr(),\n      actionButton(\"reset\", \"Clear Results\", class = \"btn-warning\")\n    ),\n    mainPanel(\n      textOutput(\"result\"),\n      uiOutput(\"agreement_ui\"),\n      uiOutput(\"add_word_ui\"),\n      uiOutput(\"next_steps_ui\")  # New UI element for next steps\n    )\n  )\n)\n\nserver <- function(input, output, session) {\n  # Reactive values for state management\n  rv <- reactiveValues(\n    current_word = NULL,\n    definition = NULL,\n    show_agreement = FALSE,\n    show_add_word = FALSE,\n    show_next_steps = FALSE\n  )\n  \n  # Load critical words dataset\n  critical_words_path <- here(\"data\", \"critical_words_dataset.csv\")\n  critical_words_df <- tryCatch({\n    if (file.exists(critical_words_path)) {\n      # Read the CSV, select only Keyword and Definition columns\n      df <- read.csv(critical_words_path, stringsAsFactors = FALSE) %>%\n        select(Keyword, Definition)\n      df\n    } else {\n      data.frame(Keyword = character(), Definition = character())\n    }\n  }, error = function(e) {\n    showNotification(\"Critical dataset not found! Contact administrator.\", \n                     type = \"error\")\n    data.frame(Keyword = character(), Definition = character())\n  })\n  \n  # Handle word submission\n  observeEvent(input$submit, {\n    req(input$word)\n    word <- tolower(trimws(input$word))\n    \n    # Reset UI state\n    rv$show_agreement <- FALSE\n    rv$show_add_word <- FALSE\n    rv$show_next_steps <- FALSE\n    \n    if (nchar(word) > 0) {\n      found_word <- critical_words_df %>%\n        filter(tolower(Keyword) == word)\n      \n      if (nrow(found_word) > 0) {\n        rv$current_word <- word\n        rv$definition <- found_word$Definition[1]\n        rv$show_agreement <- TRUE\n      } else {\n        rv$current_word <- word\n        rv$definition <- NULL\n        rv$show_add_word <- TRUE\n      }\n    }\n  })\n  \n  # Handle reset\n  observeEvent(input$reset, {\n    updateTextInput(session, \"word\", value = \"\")\n    rv$current_word <- NULL\n    rv$definition <- NULL\n    rv$show_agreement <- FALSE\n    rv$show_add_word <- FALSE\n    rv$show_next_steps <- FALSE\n  })\n  \n  # Display main result\n  output$result <- renderText({\n    if (is.null(rv$current_word)) {\n      return(\"Please enter a word to query.\")\n    }\n    if (!is.null(rv$definition)) {\n      return(paste(\"Definition:\", rv$definition))\n    }\n    \"Word not found in the database.\"\n  })\n  \n  # Agreement UI elements\n  output$agreement_ui <- renderUI({\n    if (rv$show_agreement) {\n      tagList(\n        radioButtons(\"agreement\", \"Do you agree with this definition?\",\n                     choices = c(\"Yes\", \"No\"), selected = character(0)),\n        conditionalPanel(\n          condition = \"input.agreement == 'No'\",\n          textInput(\"new_definition\", \"Enter your alternative definition:\"),\n          actionButton(\"submit_new\", \"Submit Alternative Definition\")\n        )\n      )\n    }\n  })\n  \n  # Next steps UI after agreement\n  output$next_steps_ui <- renderUI({\n    if (rv$show_next_steps) {\n      tagList(\n        h4(\"Next Steps:\"),\n        actionButton(\"new_search\", \"Search New Term\", class = \"btn-primary\"),\n        actionButton(\"related_terms\", \"Find Related Terms\", class = \"btn-info\")\n      )\n    }\n  })\n  \n  # Handle agreement selection\n  observeEvent(input$agreement, {\n    req(input$agreement)\n    if (input$agreement == \"Yes\") {\n      rv$show_next_steps <- TRUE\n    } else {\n      rv$show_next_steps <- FALSE\n    }\n  })\n  \n  # Handle new search\n  observeEvent(input$new_search, {\n    updateTextInput(session, \"word\", value = \"\")\n    rv$current_word <- NULL\n    rv$definition <- NULL\n    rv$show_agreement <- FALSE\n    rv$show_add_word <- FALSE\n    rv$show_next_steps <- FALSE\n  })\n  \n  # Handle related terms search (placeholder for future implementation)\n  observeEvent(input$related_terms, {\n    req(rv$current_word)\n    showNotification(\"Related terms feature coming soon!\", type = \"message\")\n  })\n  \n  # New UI for adding words with appending logic for dataset updates\n  output$add_word_ui <- renderUI({\n    if (rv$show_add_word) {\n      tagList(\n        h4(\"Word not found. Would you like to add it to our database?\"),\n        textAreaInput(\"new_word_definition\", \"Enter your definition:\",\n                      rows = 3, resize = \"vertical\"),\n        actionButton(\"submit_new_word\", \"Add New Word\")\n      )\n    }\n  })\n  \n  # Handle new word submission with appending logic for dataset updates\n  observeEvent(input$submit_new_word, {\n    req(input$new_word_definition)\n    \n    new_entry <- data.frame(\n      Keyword = rv$current_word,\n      Definition = trimws(input$new_word_definition),\n      stringsAsFactors = FALSE\n    )\n    \n    tryCatch({\n      # Append new entry to the dataset file without overwriting existing data\n      write.table(new_entry, file = critical_words_path, sep = \",\",\n                  col.names = !file.exists(critical_words_path), row.names = FALSE,\n                  append = TRUE)\n      \n      showNotification(\"New word added successfully!\", type = \"message\")\n      \n      # Update reactive values for UI state management after adding the new word\n      critical_words_df <<- bind_rows(critical_words_df, new_entry)\n      \n      rv$current_word <- NULL\n      \n      updateTextInput(session, \"new_word_definition\", value = \"\")\n      \n      rv$show_add_word <- FALSE\n      \n    }, error = function(e) {\n      showNotification(paste(\"Failed to add new word:\", e$message), type = \"error\")\n    })\n  })\n}\n\nshinyApp(ui, server)\n\n","type":"text"},{"name":"data/alternative_definitions.csv","content":"\"Word\",\"Alternative_Definition\",\"Timestamp\"\n\"racism\",\"this is an alternative definition.\",\"2025-04-07 22:13:29\"\n\"race\",\"A social construct that ties ethnic origin to region and is based on the perceived construction of innocence and power.\",\"2025-04-07 22:18:09\"\n\"racist\",\"From Oxford Languages: characterized by or showing prejudice, discrimination, or antagonism against a person or people on the basis of their membership in a particular racial or ethnic group, typically one that is a minority or marginalized.\",\"2025-04-07 22:22:32\"\n\"racial\",\"From Oxford Languages: relating to the major groupings into which humankind is sometimes divided on the basis of physical characteristics or shared ancestry.\",\"2025-04-07 22:25:23\"\n","type":"text"},{"name":"data/critical_words_dataset.csv","content":"\"Topic\",\"Keyword\",\"Score\",\"Definition\"\n\"Race and Racism\",\"racism\",-0.42,\"Prejudice based on race\"\n\"Race and Racism\",\"privilege\",0.58,\"Unearned advantages based on identity\"\n\"Race and Racism\",\"microaggression\",-0.18,\"Subtle discriminatory comments or actions\"\n\"Race and Racism\",\"intersectionality\",0.77,\"Interconnected nature of social categorizations\"\n\"Race and Racism\",\"colorblindness\",0.88,\"Ignoring racial differences\"\n\"Race and Racism\",\"discrimination\",-0.91,\"Unfair treatment based on race\"\n\"Race and Racism\",\"bias\",0.06,\"Prejudice in favor of or against one group\"\n\"Race and Racism\",\"stereotype\",0.78,\"Oversimplified image of a particular type\"\n\"Race and Racism\",\"segregation\",0.1,\"Separation or isolation of a race or class\"\n\"Race and Racism\",\"diversity\",-0.09,\"Inclusion of different types of people\"\n\"Race and Racism\",\"inclusion\",0.91,\"Act of including all types of people\"\n\"Race and Racism\",\"equity\",-0.09,\"Fairness and justice in procedures and outcomes\"\n\"Race and Racism\",\"allyship\",0.36,\"Supportive association with marginalized group\"\n\"Race and Racism\",\"xenophobia\",0.15,\"Fear or hatred of foreigners\"\n\"Race and Racism\",\"ethnocentrism\",-0.79,\"Evaluating other cultures by one's own cultural standards\"\n\"Race and Racism\",\"assimilation\",0.8,\"Adoption of dominant culture's values and behaviors\"\n\"Race and Racism\",\"multiculturalism\",-0.51,\"Coexistence of diverse cultural groups\"\n\"Race and Racism\",\"prejudice\",-0.92,\"Preconceived opinion not based on reason\"\n\"Race and Racism\",\"implicit\",-0.34,\"Unconscious attitudes affecting behavior\"\n\"Race and Racism\",\"explicit\",0.91,\"Conscious and intentional prejudice\"\n\"Race and Racism\",\"systemic\",0.78,\"Racism embedded in social structures\"\n\"Race and Racism\",\"institutional\",0.39,\"Racism within established institutions\"\n\"Race and Racism\",\"internalized\",0.28,\"Acceptance of negative stereotypes about one's own group\"\n\"Race and Racism\",\"marginalization\",0.99,\"Treatment as insignificant or peripheral\"\n\"Race and Racism\",\"othering\",0.31,\"Viewing or treating a person or group as intrinsically different\"\n\"Sex and Sexism\",\"sexism\",0.42,\"Prejudice based on sex\"\n\"Sex and Sexism\",\"patriarchy\",0.09,\"System where men hold primary power\"\n\"Sex and Sexism\",\"misogyny\",0.19,\"Hatred or contempt for women\"\n\"Sex and Sexism\",\"feminism\",-0.42,\"Advocacy for women's rights and equality\"\n\"Sex and Sexism\",\"harassment\",-0.71,\"Aggressive pressure or intimidation\"\n\"Sex and Sexism\",\"objectification\",0.93,\"Treating a person as a commodity\"\n\"Sex and Sexism\",\"equality\",0.8,\"State of being equal in status or rights\"\n\"Sex and Sexism\",\"empowerment\",0.38,\"Process of becoming stronger and more confident\"\n\"Sex and Sexism\",\"consent\",0.59,\"Permission for something to happen or agreement to do something\"\n\"Sex and Sexism\",\"mansplaining\",-0.95,\"Explaining something to a woman in a condescending way\"\n\"Sex and Sexism\",\"gaslighting\",-0.04,\"Manipulating someone into questioning their own sanity\"\n\"Sex and Sexism\",\"victim-blaming\",0.52,\"Suggesting a victim is partly responsible for their own abuse\"\n\"Sex and Sexism\",\"slut-shaming\",-0.57,\"Criticizing women for perceived sexual activity\"\n\"Sex and Sexism\",\"gender-bias\",-0.36,\"Unfair lean toward one gender over another\"\n\"Sex and Sexism\",\"wage-gap\",-0.54,\"Disparity in earnings between men and women\"\n\"Sex and Sexism\",\"glass-ceiling\",-0.71,\"Invisible barrier to advancement in a profession\"\n\"Sex and Sexism\",\"double-standard\",-0.17,\"Rule or standard applied differently between sexes\"\n\"Sex and Sexism\",\"stereotyping\",-0.17,\"Assigning oversimplified characteristics to a group\"\n\"Sex and Sexism\",\"discrimination\",-0.26,\"Unfair treatment based on sex\"\n\"Sex and Sexism\",\"underrepresentation\",-0.7,\"Inadequate presence in a field or sector\"\n\"Sex and Sexism\",\"marginalization\",-0.72,\"Treatment as insignificant or peripheral\"\n\"Sex and Sexism\",\"toxic-masculinity\",-0.53,\"Harmful cultural norms associated with masculinity\"\n\"Sex and Sexism\",\"male-gaze\",-0.07,\"Depicting the world from a masculine point of view\"\n\"Sex and Sexism\",\"intersectionality\",-0.47,\"Interconnected nature of social categorizations\"\n\"Sex and Sexism\",\"femininity\",0.72,\"Traits associated with being female\"\n\"Poverty\",\"poverty\",-0.91,\"State of lacking sufficient money or resources\"\n\"Poverty\",\"inequality\",-0.12,\"Uneven distribution of resources\"\n\"Poverty\",\"unemployment\",0.6,\"State of not having a paid job\"\n\"Poverty\",\"homelessness\",-0.76,\"Condition of lacking stable housing\"\n\"Poverty\",\"welfare\",0.12,\"Government support for those in need\"\n\"Poverty\",\"deprivation\",-0.59,\"State of being severely lacking in basic needs\"\n\"Poverty\",\"marginalization\",-0.74,\"Treatment as insignificant or peripheral\"\n\"Poverty\",\"exclusion\",0.51,\"Process of not allowing participation\"\n\"Poverty\",\"gentrification\",0.79,\"Renovation leading to an influx of wealthy residents\"\n\"Poverty\",\"food-insecurity\",-0.25,\"Lack of reliable access to sufficient food\"\n\"Poverty\",\"malnutrition\",0.33,\"Lack of proper nutrition\"\n\"Poverty\",\"illiteracy\",-0.81,\"Inability to read or write\"\n\"Poverty\",\"underemployment\",-0.23,\"Insufficient employment\"\n\"Poverty\",\"debt\",-0.45,\"Owing money\"\n\"Poverty\",\"social-mobility\",0.63,\"Ability to move between social classes\"\n\"Poverty\",\"class\",-0.1,\"Social standing or grouping\"\n\"Poverty\",\"socioeconomic\",0.62,\"Relating to social and economic factors\"\n\"Poverty\",\"income\",0.62,\"Money received on a regular basis\"\n\"Poverty\",\"wealth-gap\",0.59,\"Large disparity in wealth between groups\"\n\"Poverty\",\"cyclical\",-0.12,\"Recurring nature of poverty\"\n\"Poverty\",\"systemic\",0.51,\"Embedded in social systems\"\n\"Poverty\",\"working-poor\",0.26,\"Employed but still in poverty\"\n\"Poverty\",\"minimum-wage\",0.42,\"Lowest wage permitted by law\"\n\"Poverty\",\"social-safety-net\",-1,\"Public financial support systems\"\n\"Poverty\",\"austerity\",-0.05,\"Reduction in government spending\"\n\"Gender\",\"gender\",-0.56,\"Socially constructed characteristics of sexes\"\n\"Gender\",\"transgender\",-0.24,\"Person whose gender differs from birth sex\"\n\"Gender\",\"cisgender\",0.23,\"Person whose gender matches birth sex\"\n\"Gender\",\"nonbinary\",-0.3,\"Gender identity not exclusively male or female\"\n\"Gender\",\"queer\",-0.78,\"Umbrella term for non-heterosexual orientations\"\n\"Gender\",\"identity\",-0.51,\"One's concept of self as male, female, or neither\"\n\"Gender\",\"expression\",0.34,\"External manifestation of one's gender\"\n\"Gender\",\"fluidity\",-0.16,\"Dynamic nature of gender identity\"\n\"Gender\",\"dysphoria\",0.58,\"Distress due to mismatch between gender and sex\"\n\"Gender\",\"transition\",-0.79,\"Process of changing one's gender presentation\"\n\"Gender\",\"pronouns\",-0.13,\"Words used to refer to a person's gender\"\n\"Gender\",\"genderqueer\",0.97,\"Non-binary gender identity\"\n\"Gender\",\"agender\",0.79,\"Lacking gender identification\"\n\"Gender\",\"bigender\",0.77,\"Identifying as both male and female\"\n\"Gender\",\"two-spirit\",-0.65,\"Non-Western cultures' non-binary gender\"\n\"Gender\",\"androgyny\",-0.74,\"Combination of masculine and feminine characteristics\"\n\"Gender\",\"genderfluid\",0.31,\"Gender identity that varies over time\"\n\"Gender\",\"misgendering\",-0.31,\"Referring to someone by wrong gender\"\n\"Gender\",\"deadnaming\",0.31,\"Using a transgender person's birth name\"\n\"Gender\",\"binarism\",-0.36,\"Belief in only two genders\"\n\"Gender\",\"heteronormativity\",-0.62,\"Assumption that heterosexuality is the norm\"\n\"Gender\",\"lgbtqia+\",0.56,\"Acronym for sexual and gender minorities\"\n\"Gender\",\"intersex\",-0.81,\"Born with sex characteristics of both sexes\"\n\"Gender\",\"drag\",-0.07,\"Cross-dressing performance art\"\n\"Gender\",\"gender-neutral\",0.02,\"Not specific to one gender\"\n\"Anti-Blackness\",\"antiblackness\",0.2,\"Prejudice specifically against Black people\"\n\"Anti-Blackness\",\"segregation\",-0.33,\"Separation or isolation of a race or class\"\n\"Anti-Blackness\",\"profiling\",-0.02,\"Using race as a basis for suspicion\"\n\"Anti-Blackness\",\"tokenism\",0.91,\"Symbolic effort towards inclusivity\"\n\"Anti-Blackness\",\"oppression\",-0.03,\"Prolonged cruel or unjust treatment\"\n\"Anti-Blackness\",\"disenfranchisement\",0.78,\"Deprivation of power to participate in political process\"\n\"Anti-Blackness\",\"redlining\",0.83,\"Discriminatory denial of services based on race\"\n\"Anti-Blackness\",\"colorism\",0.22,\"Discrimination based on skin shade\"\n\"Anti-Blackness\",\"microaggression\",-0.18,\"Subtle discriminatory comments or actions\"\n\"Anti-Blackness\",\"stereotype\",-0.71,\"Oversimplified image of a particular type\"\n\"Anti-Blackness\",\"discrimination\",0.87,\"Unfair treatment based on race\"\n\"Anti-Blackness\",\"bias\",-0.4,\"Prejudice in favor of or against one group\"\n\"Anti-Blackness\",\"prejudice\",-0.88,\"Preconceived opinion not based on reason\"\n\"Anti-Blackness\",\"racism\",0.9,\"Prejudice based on race\"\n\"Anti-Blackness\",\"systemic\",0.44,\"Racism embedded in social structures\"\n\"Anti-Blackness\",\"institutional\",-0.72,\"Racism within established institutions\"\n\"Anti-Blackness\",\"structural\",0.1,\"Fundamental racism in society's structure\"\n\"Anti-Blackness\",\"marginalization\",0.91,\"Treatment as insignificant or peripheral\"\n\"Anti-Blackness\",\"intersectionality\",0.17,\"Interconnected nature of social categorizations\"\n\"Anti-Blackness\",\"privilege\",-0.19,\"Unearned advantages based on identity\"\n\"Anti-Blackness\",\"white-supremacy\",0.3,\"Belief in superiority of white people\"\n\"Anti-Blackness\",\"police-brutality\",-0.36,\"Excessive force by law enforcement against Black individuals\"\n\"Anti-Blackness\",\"mass-incarceration\",-0.38,\"Disproportionate imprisonment of Black people\"\n\"Anti-Blackness\",\"racial-wealth-gap\",-0.56,\"Economic disparity between racial groups\"\n\"Anti-Blackness\",\"environmental-racism\",-0.26,\"Policies causing environmental harm to minorities\"\n\"Anti-Semitism\",\"antisemitism\",0.97,\"Hostility or prejudice against Jews\"\n\"Anti-Semitism\",\"scapegoating\",-0.69,\"Blaming a group for societal problems\"\n\"Anti-Semitism\",\"holocaust\",-0.82,\"Genocide of European Jews in World War II\"\n\"Anti-Semitism\",\"prejudice\",-0.72,\"Preconceived opinion not based on reason\"\n\"Anti-Semitism\",\"xenophobia\",0.38,\"Fear or hatred of foreigners\"\n\"Anti-Semitism\",\"bigotry\",0.24,\"Intolerance towards those with different opinions\"\n\"Anti-Semitism\",\"discrimination\",0.78,\"Unfair treatment based on group membership\"\n\"Anti-Semitism\",\"stereotyping\",0.35,\"Widely held but oversimplified image of a group\"\n\"Anti-Semitism\",\"hate-speech\",0.47,\"Abusive or threatening speech targeting specific groups\"\n\"Anti-Semitism\",\"persecution\",0.04,\"Harassment or ill-treatment based on identity\"\n\"Anti-Semitism\",\"genocide\",0.32,\"Deliberate killing of a large group of people\"\n\"Anti-Semitism\",\"diaspora\",0.64,\"Scattered population with a common origin\"\n\"Anti-Semitism\",\"zionism\",0.57,\"Movement for development of Jewish state\"\n\"Anti-Semitism\",\"anti-zionism\",0.96,\"Opposition to the state of Israel\"\n\"Anti-Semitism\",\"blood-libel\",-0.12,\"False accusation historically used against Jews\"\n\"Anti-Semitism\",\"conspiracy\",-0.38,\"Belief in a secret plan by a group\"\n\"Anti-Semitism\",\"tokenism\",-0.18,\"Symbolic effort towards inclusivity\"\n\"Anti-Semitism\",\"othering\",-0.98,\"Viewing or treating a person or group as intrinsically different\"\n\"Anti-Semitism\",\"marginalization\",-0.63,\"Treatment as insignificant or peripheral\"\n\"Anti-Semitism\",\"microaggression\",0.69,\"Subtle discriminatory comments or actions\"\n\"Anti-Semitism\",\"islamophobia\",-0.54,\"Prejudice against Muslims\"\n\"Anti-Semitism\",\"interfaith\",-0.52,\"Cooperation between different religions\"\n\"Anti-Semitism\",\"assimilation\",-0.85,\"Adoption of dominant culture's values and behaviors\"\nNA,\"race\",NA,\"A social construct that ties ethnic origin to region and is based on the perceived construction of innocence and power.\"\nNA,\"racist\",NA,\"From Oxford Languages: characterized by or showing prejudice, discrimination, or antagonism against a person or people on the basis of their membership in a particular racial or ethnic group, typically one that is a minority or marginalized.\"\nNA,\"racial\",NA,\"From Oxford Languages: relating to the major groupings into which humankind is sometimes divided on the basis of physical characteristics or shared ancestry.\"\n","type":"text"}]
